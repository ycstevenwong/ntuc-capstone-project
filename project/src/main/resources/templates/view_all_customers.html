<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <th:block th:replace="components/links :: base"></th:block>
    <title>Title</title>
</head>

<body>
<div th:replace="components/nav :: base(isCurrentPage='Customer')"></div>
<div th:if="${message =='Account created!'}">
    <th:block
            th:replace="components/alert :: success (message='You have successfully created a customer!')"
    ></th:block>
</div>
<div>
    <h1 style="font-size:30px; text-align: center; padding-top: 5px; padding-bottom: 5px;">Customer Overview </h1>
    <a th:href="@{/customer/create}">
        <button type="button" class="btn btn-primary">Add new customer</button>
    </a>
    <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover">
            <thead class="table-header">
            <tr>
                <th>Customer ID</th>
                <th>Customer Name</th>
                <th>NRIC</th>
                <th>Phone</th>
                <th>Age</th>
                <th>Birth</th>
                <th>Gender</th>
                <th>Email</th>
                <th>Address</th>
                <th>Nominee Name</th>
                <th>Nominee NRIC</th>
                <th>Registration Time</th>
                <th style="text-align: center">Operations</th>
            </tr>
        </thead>
            <tbody>
            <tr th:each="c:${allCustomers}">
                <td th:text="${c.getId()}"></td>
                <td th:text="${c.getName()}"></td>
                <td th:text="${c.getNric()}"></td>
                <td th:text="${c.getPhone()}"></td>
                <td th:text="${c.getAge()}"></td>
                <td th:text="${c.getBirthDate()}"></td>
                <td th:text="${c.getGender()}"></td>
                <td th:text="${c.getEmailAddress()}"></td>
                <td th:text="${c.getAddress()}"></td>
                <td th:text="${c.getNomineeName()}"></td>
                <td th:text="${c.getNomineeNric()}"></td>
                <td th:text="${c.getTimestamp()}"></td>
                <td>
                    <div>
                        <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#exampleModal"
                        th:onclick="values([[${c.getId()}]],[[${c.getName()}]],[[${c.getNric()}]],[[${c.getPhone()}]],[[${c.getAge()}]]
                        ,[[${c.getBirthDate()}]],[[${c.getGender()}]],[[${c.getEmailAddress()}]],[[${c.getAddress()}]],[[${c.getNomineeName()}]],[[${c.getNomineeNric()}]])">
                                    Edit Customer Profile
                                </button>
                                <a th:href="@{/accounts/}+${c.getId()}">
                                    <button type="button" class="btn btn-outline-warning">
                                        Add New Account
                                    </button>
                                </a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <th:block th:unless="${#lists.isEmpty(allCustomers)}">
            <th:block th:replace="components/pagination :: base(num=${customer.id})"></th:block>
        </th:block>
        <div th:replace="customer-modal::cutomer_edit_modal"></div>
    </div>
    <div th:replace="components/footer :: base"></div>
    <div th:replace="components/scripts :: base"></div>
    <script>
        function values(id, name, nric, phone, age, birth, gender, email, address, nomineeName, nomineeNric) {
            $('#id').val(id)
            $('#name').val(name)
            $('#nric').val(nric)
            $('#phone').val(phone)
            $('#age').val(age)
            $('#birth').val(birth)
            $('#gender').val(gender)
            $('#email').val(email)
            $('#address').val(address)
            $('#nomineeName').val(nomineeName)
            $('#nomineeNric').val(nomineeNric)
        }
    </script>
</body>

</html>